/*
 * Licensed to the Apache Software Foundation (ASF) under one or more
 * contributor license agreements.  See the NOTICE file distributed with
 * this work for additional information regarding copyright ownership.
 * The ASF licenses this file to You under the Apache License, Version 2.0
 * (the "License"); you may not use this file except in compliance with
 * the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

 @use 'sass:map';
 @use '@angular/material' as mat;

 @mixin generate-theme($material-theme, $nifi-theme) {
    // Get the color config from the theme.
    $material-theme-color-config: mat.m2-get-color-config($material-theme);
    $nifi-theme-color-config: mat.m2-get-color-config($nifi-theme);

    // Get the color palette from the color-config.
    $material-theme-primary-palette: map.get($material-theme-color-config, 'primary');
    $nifi-theme-surface-palette: map.get($nifi-theme-color-config, 'primary');

    // Get hues from palette
    $is-dark: map-get($material-theme-color-config, is-dark);
    $material-theme-primary-palette-default: mat.m2-get-color-from-palette($material-theme-primary-palette);
    $material-theme-primary-palette-lighter: mat.m2-get-color-from-palette($material-theme-primary-palette, lighter);
    $material-theme-primary-palette-darker: mat.m2-get-color-from-palette($material-theme-primary-palette, darker);
    $nifi-theme-surface-palette-darker: mat.m2-get-color-from-palette($nifi-theme-surface-palette, darker);
    $nifi-theme-surface-palette-lighter: mat.m2-get-color-from-palette($nifi-theme-surface-palette, lighter);

    $hover: var(--mat-menu-item-hover-state-layer-color);

    .flow-analysis-drawer {
        background-color: if($is-dark, $nifi-theme-surface-palette-darker, $nifi-theme-surface-palette-lighter);
        box-shadow: 0 1px 6px rgba(0, 0, 0, 0.25);
        height: calc(100vh - 115px);
        overflow-y: scroll;
        padding: 20px;
        right: -400px;
        transition: right 0.3s ease-in-out;
        width: 341px;
        z-index: 2;
    }

    .flow-analysis-drawer.opened {
        right: 0;
    }

    .flow-analysis-loading-container {
        background-color: transparent;
        float: left;
        height: 16px;
        margin-left: 0;
        margin-right: 5px;
        margin-top: 0;
        width: 16px;
    }

    .flow-analysis-flow-guide-title {
        color: #728e9b;
        font-family: Roboto;
        font-size: 16px;
        font-stretch: normal;
        font-style: normal;
        font-weight: 400;
        letter-spacing: normal;
        line-height: normal;
        margin-bottom: 5px;
    }

    .flow-analysis-drawer
    .flow-analysis-rules-accordion
    .ui-accordion-header,
    .flow-analysis-drawer .rules-violations-header,
    .flow-analysis-drawer .rules-warnings-header {
        background-color: transparent;
        border: 0;
        color: if($is-dark, $material-theme-primary-palette-lighter, #606060);
        display: flex;
        font-family: Roboto;
        font-size: 12px;
        justify-content: space-between;
        padding: 10px 0;
        border-bottom: 1px solid #ddd;
        align-items: center;
    }

    .flow-analysis-drawer .rule-menu-option,
    .flow-analysis-drawer .violation-menu-option {
        padding: 3px 0 3px 10px;
        background-color: #fff;
        font-family: Roboto;
        font-size: 13px;
        font-weight: normal;
        font-stretch: normal;
        font-style: normal;
        line-height: 1.15;
        letter-spacing: normal;
        text-align: left;
        color: #262626;
        display: flex;
        align-items: center;
        margin: 3px 0;
    }

    /* Violations */

    .rule-violations-count {
        color: #ba554a;
    }

    .rule-recommendations-count {
        color: #176e83;
    }

    .violation-list-item-name::before,
    .warning-list-item-name::before,
    .recommendation-list-item-name::before {
        content: '';
        position: absolute;
        left: 8px;
        top: 16px;
        width: 6px;
        height: 6px;
        border-radius: 50%;
    }

    .violation-list-item-name::before,
    .rule-violations-list-item-wrapper:before {
        background-color: #ba554a;
    }

    .recommendation-list-item-name::before,
    .rule-warnings-list-item-name::before,
    .warning-list-item-name::before,
    .recommendation-list-item-name::before {
        background-color: transparent;
        border: 1px solid #176e83;
    }

    .violation-list-item-name,
    .recommendation-list-item-name,
    .warning-list-item-name {
        font-size: 11px;
    }

    .rule-violations-list-item-name {
        color: #ba554a;
    }

    .rule-warnings-list-item-name {
        color: #176e83;
    }

    .violation-list-item-id,
    .recommendation-list-item-id,
    .warning-list-item-id {
        font-size: 11px;
        line-height: normal;
        color: if($is-dark, $material-theme-primary-palette-lighter, #606060);
    }
 }
